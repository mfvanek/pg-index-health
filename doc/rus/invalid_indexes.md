# Проверка невалидных индексов в таблицах

## Почему может появиться невалидный индекс
Иногда команда создания индекса CREATE INDEX [завершается ошибкой](https://postgrespro.ru/docs/postgresql/17/sql-createindex).
В этом случае идекс создается, но игнорируется при чтении данных.

## Почему надо избавляться от невалидных индексов
При изменении данных невалидный индекс может использовать ресурсы системы при добавлении новых данных так же, как и валидный, хотя он бесполезен.
Если такой индекс уникальный (при этом он может быть составным, индексом по выражениям или частичным), то ограничение уникальности может остаться и влиять на изменения данных.

## Как работает эта проверка
При вызове метода класса этой проверки doCheck выполняется sql-запрос [sql](https://github.com/mfvanek/pg-index-health-sql/blob/master/sql/invalid_indexes.sql).
Работает для статического анализа и в runtime-варианте на работающем инстансе базы данных.
Подходит для секционированных таблиц.



