# Проверка наличия столбцов с типом varchar(n) в таблицах

## Рекомендация
В [документации](https://postgrespro.ru/docs/postgresql/17/datatype-json) говорится, что не следует использовать тип varchar(n) по умолчанию. Вместо него стоит использовать varchar (без ограничения длины) или text.

## Почему не стоит использовать

varchar(n) - это текстовое поле переменной длины, которое выдаст ошибку, если вы попытаетесь вставить в него строку длиннее n символов.
varchar (без (n)) или text похожи, но без ограничения длины. Если вы вставите одну и ту же строку в три типа полей, они займут одинаковое количество места, и вы не сможете оценить разницу в производительности.
Если вам нужно ограничить значение в поле, вам, вероятно, нужно что-то более конкретное, чем максимальная длина.

## Когда использовать

Если вам нужно текстовое поле, которое выдаст ошибку, если вы вставите в него слишком длинную строку, и вы не хотите использовать явное ограничение проверкой, то varchar(n) - вполне подходящий тип.

## SQL запрос

- [columns_with_json_type.sql](https://github.com/mfvanek/pg-index-health-sql/blob/master/sql/columns_with_fixed_length_varchar.sql)

## Тип проверки

- **static** (может выполняться на пустой БД в компонентных\интеграционных тестах)

## Поддержка секционированных таблиц

Поддерживает секционированные таблицы.
Проверка выполняется на самой секционированной таблице (родительской). Отдельные секции (потомки) игнорируются.
