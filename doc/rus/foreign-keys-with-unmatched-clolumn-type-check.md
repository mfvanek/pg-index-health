# Проверка внешних ключей, у которых есть расхождения типов столбцов

## Особенности создания внешних ключей
Обычно зависимая строка не должна удовлетворять ограничению внешнего ключа, если один из связанных столбцов содержит NULL. Если в объявление внешнего ключа добавлено MATCH FULL, строка будет удовлетворять ограничению, только если все связанные столбцы равны NULL (то есть при разных значениях (NULL и не NULL) гарантируется невыполнение ограничения MATCH FULL). Если вы хотите, чтобы зависимые строки не могли избежать и этого ограничения, объявите [связанные столбцы как NOT NULL](https://postgrespro.ru/docs/postgrespro/17/ddl-constraints#DDL-CONSTRAINTS-FK).

## Почему типы столбцов у внешних ключей должны совпадать
если FK состоит из нескольких столбцов и часть из них может принимать значение NULL, в отношение могут добавляться данные, которые не соответствуют ожиданиям разработчика.

## Как работает эта проверка
При вызове метода класса этой проверки doCheck выполняется sql-запрос [sql](https://github.com/mfvanek/pg-index-health-sql/blob/master/sql/foreign_keys_with_unmatched_column_type.sql).
Работает для статического анализа.
Не подходит для секционированных таблиц.
