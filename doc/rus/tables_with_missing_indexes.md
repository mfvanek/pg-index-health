# Проверка таблиц на нехватку индексов

## Как понять, что нужен индекс

Представление pg_stat_all_tables [содержит статистику по обращениям к таблицам](https://postgrespro.ru/docs/postgresql/17/monitoring-stats#MONITORING-PG-STAT-ALL-INDEXES-VIEW).
Отсюда можно получить данные о том, насколько часто используется последовательное сканирование и поиск с помощью индексов.
Если таблица часто сканируется последовательно, то стоит добавить индексы для соответствующих столбцов.

## Почему нужно следить за использованием индексов

Если статистика показывает много запросов с последовательным сканированием таблицы,
то добавление индекса может ускорить поиск и снизить нагрузку на БД.

## SQL запрос

- [tables_with_missing_indexes.sql](https://github.com/mfvanek/pg-index-health-sql/blob/master/sql/tables_with_missing_indexes.sql)

## Тип проверки

- **runtime** (требует наличия накопленной статистики)

В кластере БД проверка должна выполняться на каждом хосте.

## Поддержка секционированных таблиц

Поддерживает секционированные таблицы. Проверка выполняется на каждой секции.
